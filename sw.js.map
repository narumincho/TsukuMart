{"mappings":"AAAA,EAA2B,AAA3B,yBAA2B;EACzB,IAA8B,GAAK,CAAC;IACpC,IAAI,CAAC,gBAAgB,CAAC,CAAS,WAAG,CAAC,GAAK,CAAC;QACvC,OAAO,CAAC,GAAG,CACT,CAAsD;QAER,CAA/C,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW;IAC9B,CAAC;IAED,IAAI,CAAC,gBAAgB,CAAC,CAAU,YAAG,CAAC,GAAK,CAAC;QACxC,OAAO,CAAC,GAAG,CAAC,CAA6B;QACf,CAAzB,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK;IAChC,CAAC;IAED,IAAI,CAAC,gBAAgB,CAAC,CAAO,SAAG,CAAC,GAAK,CAAC;QACrC,EAAE,EAAE,SAAS,CAAC,MAAM,EAClB,MAAM;QAER,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAQ;QAC7C,EAAE,EAAE,MAAM,KAAK,IAAI,EACjB,MAAM;QAER,EAAE,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAW,aAC7B,CAAC,CAAC,WAAW,CACX,GAAG,CAAC,QAAQ,EACT,qcAoBJ,GACG,CAAC;YAAC,OAAO,EAAE,CAAC;gBAAC,CAAc,eAAE,CAAW;YAAC,CAAC;QAAC,CAAC;IAIpD,CAAC;IAED,IAAI,CAAC,gBAAgB,CAAC,CAAM,QAAG,CAAC,GAAK,CAAC;QACpC,OAAO,CAAC,GAAG,CAAC,CAAY,yBAAc,CAAC;IAC7B,CAAX;IAED,IAAI,CAAC,gBAAgB,CAAC,CAAM,QAAG,CAAC,GAAK,CAAC;QACpC,OAAO,CAAC,GAAG,CAAC,CAAoB,yDAAsC,CAAC;QAEnC,CAAnC,CAAC,SAAS,CACT,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAW,4BAAkB,CAAC;YAC/C,IAAZ,EAAE,CAAuB;YAC7B,IAAI,EAAE,CAAuB;YAC7B,GAAG,EAAE,CAAuB;QAC9B,CAAC;IAEL,CAAC;AACH,CAAC,EAAE,IAAI","sources":["source/sw.ts"],"sourcesContent":["// Tsukumart Service Worker\n((self: ServiceWorkerGlobalScope) => {\n  self.addEventListener(\"install\", (e) => {\n    console.log(\n      \"Service Worker内でServiceWorkerがブラウザにインストールされたことを検知した!\"\n    );\n    e.waitUntil(self.skipWaiting());\n  });\n\n  self.addEventListener(\"activate\", (e) => {\n    console.log(\"Service Workerがアクティブな状態になった\");\n    e.waitUntil(self.clients.claim());\n  });\n\n  self.addEventListener(\"fetch\", (e) => {\n    if (navigator.onLine) {\n      return;\n    }\n    const accept = e.request.headers.get(\"accept\");\n    if (accept === null) {\n      return;\n    }\n    if (accept.includes(\"text/html\")) {\n      e.respondWith(\n        new Response(\n          `\n<!doctype html>\n<html>\n\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n    <title>つくマート | オフライン!</title>\n    <style>\n        body {\n            font-size: 3rem;\n            text-align: center;\n        }\n    </style>\n</head>\n\n<body>\n    つくマートはオフラインでは利用できません。インターネットへの接続をしてください。\n</body>\n\n</html>`,\n          { headers: { \"content-type\": \"text/html\" } }\n        )\n      );\n    }\n  });\n\n  self.addEventListener(\"sync\", (e) => {\n    console.log(\"syncを受け取った\", e);\n  });\n\n  self.addEventListener(\"push\", (e) => {\n    console.log(\"プッシュ通知をサーバーから受け取った\", e);\n\n    e.waitUntil(\n      self.registration.showNotification(\"プッシュ通知です!\", {\n        body: \"プッシュ通知はこのようにして送られるのです\",\n        icon: \"/assets/logo_bird.png\",\n        tag: \"push-notification-tag\",\n      })\n    );\n  });\n})(self as unknown as ServiceWorkerGlobalScope);\n"],"names":[],"version":3,"file":"sw.js.map"}